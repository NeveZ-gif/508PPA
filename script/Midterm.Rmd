---
title: "Property Value Prediction Model for Seattle"
author: "Viva/Yaohan"
date: "`r Sys.Date()`"
output:
   html_document:
    keep_md: yes
    toc: yes
    theme: flatly
    toc_float: yes
    code_folding: hide
    number_sections: no
    fontsize:12pt
  pdf_document:
    toc: yes
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(
  echo = TRUE,
  message = FALSE,
  warning = FALSE,
  cache = TRUE
  )

if(!require(pacman)){install.packages("pacman"); library(pacman)}
p_load(tidyverse, sf, units, nngeo, tmap, tinytex, kableExtra, ggplot2, janitor, classInt,
       patchwork, here, tidycensus, lwgeom, lsr, haven, descr, RColorBrewer, stargazer, car)

library(conflicted)
conflicts_prefer(dplyr::select)
conflicts_prefer(dplyr::filter)

source("https://raw.githubusercontent.com/urbanSpatial/Public-Policy-Analytics-Landing/master/functions.r")

hh<- read_csv(here::here("data/raw/kc_house_data.csv")) # Read house data
```

# Introduction
This report elaborate on the process of developing and refining a comprehensive predictive model that accurately forecasts housing prices for King County, Washington (Seattle).

???by integrating both structural and locational attributes. The model aims to discern how various housing characteristics, such as size, age, and amenities, along with locational factors, including proximity to services, neighborhood quality, and accessibility, collectively impact property values.


# Data Description 



# Exploratory Data Analysis

```{r Seattle_boundary}
seattle <- st_read(here::here("data/raw/Seattle_City.geojson")) %>% # Read Seattle boundary
  st_union() %>%
  st_as_sf()

ggplot() + 
    geom_sf(data = seattle, color = "#d7191c", linewidth = 0.4) +  # Add Seattle boundary
    labs(title = "Seattle, King County") +  # Set plot title
    theme_void() +
    theme(plot.title = element_text(hjust = 0.5, face = "bold"))
```

```{r house_location}
# Quick check of house data
str(hh)
anyNA(hh$lat)
anyNA(hh$long)

# Create house location
house <- hh %>%
  st_as_sf(coords = c("long", "lat"), crs = 4326, agr = "constant") %>%  # Convert to sf object with specified CRS
  st_transform(st_crs(seattle)) %>%  # Transform coordinate reference system to "Washington State Plane North"
  distinct()  # Keep only distinct geometries

seattle_house <- house %>%
  st_intersection(seattle)

# Plot Seattle house location
ggplot() + 
    geom_sf(data = seattle, color = "#b2182b", linewidth = 0.5) +  # Add Seattle boundary
    geom_sf(data = seattle_house, color = "#2166ac", size = 0.5, pch = 16) +  # Add house location
    labs(title = "Seattle House Location") +  # Set plot title
    theme_void() +
    theme(plot.title = element_text(hjust = 0.5, face = "bold"))
```




# Modeling


# Conclusion


#


